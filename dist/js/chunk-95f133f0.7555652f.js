(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95f133f0"],{"1dde":function(t,e,n){var r=n("d039"),c=n("b622"),i=n("2d00"),o=c("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"28a4":function(t,e,n){t.exports=n.p+"img/empty-shopping-cart.154d38ad.svg"},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),c=n("5899"),i="["+c+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},"65f0":function(t,e,n){var r=n("861d"),c=n("e8b5"),i=n("b622"),o=i("species");t.exports=function(t,e){var n;return c(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!c(n.prototype)?r(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},7156:function(t,e,n){var r=n("861d"),c=n("d2bb");t.exports=function(t,e,n){var i,o;return c&&"function"==typeof(i=e.constructor)&&i!==n&&r(o=i.prototype)&&o!==n.prototype&&c(t,o),t}},8418:function(t,e,n){"use strict";var r=n("c04e"),c=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var o=r(e);o in t?c.f(t,o,i(0,n)):t[o]=n}},"99af":function(t,e,n){"use strict";var r=n("23e7"),c=n("d039"),i=n("e8b5"),o=n("861d"),a=n("7b0b"),s=n("50c4"),u=n("8418"),p=n("65f0"),d=n("1dde"),l=n("b622"),f=n("2d00"),h=l("isConcatSpreadable"),b=9007199254740991,j="Maximum allowed index exceeded",v=f>=51||!c((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=d("concat"),C=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)},O=!v||!g;r({target:"Array",proto:!0,forced:O},{concat:function(t){var e,n,r,c,i,o=a(this),d=p(o,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?o:arguments[e],C(i)){if(c=s(i.length),l+c>b)throw TypeError(j);for(n=0;n<c;n++,l++)n in i&&u(d,l,i[n])}else{if(l>=b)throw TypeError(j);u(d,l++,i)}return d.length=l,d}})},a9e3:function(t,e,n){"use strict";var r=n("83ab"),c=n("da84"),i=n("94ca"),o=n("6eeb"),a=n("5135"),s=n("c6b6"),u=n("7156"),p=n("c04e"),d=n("d039"),l=n("7c73"),f=n("241c").f,h=n("06cf").f,b=n("9bf2").f,j=n("58a8").trim,v="Number",g=c[v],C=g.prototype,O=s(l(C))==v,y=function(t){var e,n,r,c,i,o,a,s,u=p(t,!1);if("string"==typeof u&&u.length>2)if(u=j(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,c=49;break;case 79:case 111:r=8,c=55;break;default:return+u}for(i=u.slice(2),o=i.length,a=0;a<o;a++)if(s=i.charCodeAt(a),s<48||s>c)return NaN;return parseInt(i,r)}return+u};if(i(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var m,I=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof I&&(O?d((function(){C.valueOf.call(n)})):s(n)!=v)?u(new g(y(e)),n,I):y(e)},L=r?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;L.length>x;x++)a(g,m=L[x])&&!a(I,m)&&b(I,m,h(g,m));I.prototype=C,C.constructor=I,o(c,v,I)}},b727:function(t,e,n){var r=n("0366"),c=n("44ad"),i=n("7b0b"),o=n("50c4"),a=n("65f0"),s=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,p=4==t,d=6==t,l=7==t,f=5==t||d;return function(h,b,j,v){for(var g,C,O=i(h),y=c(O),m=r(b,j,3),I=o(y.length),L=0,x=v||a,P=e?x(h,I):n||l?x(h,0):void 0;I>L;L++)if((f||L in y)&&(g=y[L],C=m(g,L,O),t))if(e)P[L]=C;else if(C)switch(t){case 3:return!0;case 5:return g;case 6:return L;case 2:s.call(P,g)}else switch(t){case 4:return!1;case 7:s.call(P,g)}return d?-1:u||p?p:P}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},c668:function(t,e,n){"use strict";e["a"]={props:{favoriteProducts:{type:Array,default:function(){return[]}},shoppingCartProducts:{type:Object,default:function(){return{}}}},data:function(){return{favoriteProductList:this.favoriteProducts,shoppingCartProductList:{carts:[]}}},watch:{favoriteProducts:function(){this.favoriteProductList=this.favoriteProducts},shoppingCartProducts:function(){this.shoppingCartProductList=this.shoppingCartProducts}}}},d81d:function(t,e,n){"use strict";var r=n("23e7"),c=n("b727").map,i=n("1dde"),o=i("map");r({target:"Array",proto:!0,forced:!o},{map:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},faa5:function(t,e,n){"use strict";n.r(e);var r=n("7a23"),c=n("28a4"),i=n.n(c),o={class:"user-page-shopping-cart"},a={class:"shopping-cart"},s=Object(r["j"])("h1",{class:"shopping-cart-page-title"},"購物車清單",-1),u={key:0,class:"product-container"},p={class:"product-content"},d={class:"product-title"},l=Object(r["j"])("i",{class:"bi bi-trash"},null,-1),f={class:"product-purchase-quantity"},h={class:"product-unit"},b={class:"product-price"},j={key:1,class:"product-no-data-wrap"},v={class:"product-no-data-container"},g=Object(r["j"])("h1",{class:"product-no-data-title"},"目前沒有商品",-1),C=Object(r["j"])("img",{class:"product-no-data-img",src:i.a,alt:"購物車無商品圖片"},null,-1),O=Object(r["i"])("去逛逛"),y={class:"product-total"},m={class:"product-nutrition-list-container"},I=Object(r["h"])('<div class="nutrition-title-container"><div class="nutrition-title"><i class="bi bi-brightness-high-fill"></i>熱量 </div><div class="nutrition-title"><i class="bi bi-egg-fill"></i>蛋白質 </div><div class="nutrition-title"><i class="bi bi-droplet-half"></i>脂肪 </div><div class="nutrition-title"><i class="bi bi-palette-fill"></i>碳水化合物 </div></div>',1),L={class:"nutrition-content-container"},x={class:"nutrition-content"},P={class:"nutrition-content"},w={class:"nutrition-content"},$={class:"nutrition-content"},k=Object(r["j"])("div",{class:"product-price-title"},"商品金額總計",-1),A={class:"product-price-total"},N=Object(r["j"])("div",{class:"coupon-rebate-title"},"優惠券折抵",-1),F={class:"coupon-rebate-price"},T=Object(r["j"])("div",{class:"product-final-price-title"},"合計",-1),E={class:"product-final-price"};function q(t,e,n,c,i,q){var S=Object(r["F"])("router-link"),_=Object(r["F"])("Loading");return Object(r["w"])(),Object(r["f"])("div",o,[Object(r["j"])("div",a,[s,t.shoppingCartProductList.carts.length>0?(Object(r["w"])(),Object(r["f"])("div",u,[(Object(r["w"])(!0),Object(r["f"])(r["a"],null,Object(r["D"])(t.shoppingCartProductList.carts,(function(e){return Object(r["w"])(),Object(r["f"])("div",{class:"product",key:e.id},[Object(r["j"])("img",{src:e.product.imageUrl,alt:""},null,8,["src"]),Object(r["j"])("div",p,[Object(r["j"])("h1",d,[Object(r["j"])("p",null,Object(r["I"])(e.product.title),1)]),Object(r["j"])("div",{class:"product-delete",onClick:function(t){return q.deletCart(e.id)}},[l],8,["onClick"]),Object(r["j"])("div",f,[Object(r["j"])("i",{class:["bi bi-dash-lg",{"dash-disabled":e.qty<=1||!i.btnIsActive}],onClick:function(t){return q.changeCartQty(e.id,e.qty-1)}},null,10,["onClick"]),Object(r["S"])(Object(r["j"])("input",{type:"text","onUpdate:modelValue":function(t){return e.qty=t},minlength:"1",maxlength:"2",required:"",onChange:function(t){return q.changeCartQty(e.id,e.qty)}},null,40,["onUpdate:modelValue","onChange"]),[[r["N"],e.qty,void 0,{lazy:!0}]]),Object(r["j"])("span",h,Object(r["I"])(e.product.unit),1),Object(r["j"])("i",{class:["bi bi-plus-lg",{"plus-disabled":e.qty>=99||!i.btnIsActive}],onClick:function(t){return q.changeCartQty(e.id,e.qty+1)}},null,10,["onClick"])]),Object(r["j"])("div",b," $"+Object(r["I"])(t.$filters.currency(e.product.price*e.qty)),1)])])})),128))])):(Object(r["w"])(),Object(r["f"])("div",j,[Object(r["j"])("div",v,[g,C,Object(r["j"])(S,{to:{name:"UserProducts"},class:"product-no-data-btn",onClick:e[1]||(e[1]=function(e){return t.$emit("change-current-page-style","UserProducts")})},{default:Object(r["R"])((function(){return[O]})),_:1})])])),Object(r["j"])("div",y,[Object(r["j"])("div",m,[I,Object(r["j"])("div",L,[Object(r["j"])("div",x,Object(r["I"])(q.nutrientContentCaloriesTotal),1),Object(r["j"])("div",P,Object(r["I"])(q.nutrientContentProteinTotal),1),Object(r["j"])("div",w,Object(r["I"])(q.nutrientContentFatTotal),1),Object(r["j"])("div",$,Object(r["I"])(q.nutrientContentCarbohydratesTotal),1)])]),k,Object(r["j"])("div",A," $"+Object(r["I"])(t.shoppingCartProductList.carts.length>0?t.$filters.currency(t.shoppingCartProductList.total):0),1),Object(r["S"])(Object(r["j"])("input",{type:"text",placeholder:"請輸入優惠券序號",class:"coupon-codes","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.couponCode=t})},null,512),[[r["N"],i.couponCode]]),Object(r["j"])("button",{class:"coupon-use",type:"button",onClick:e[3]||(e[3]=function(){return q.useCoupon&&q.useCoupon.apply(q,arguments)})}," 套用 "),N,Object(r["j"])("div",F," $"+Object(r["I"])(t.shoppingCartProductList.carts.length>0?t.$filters.currency(Math.round(t.shoppingCartProductList.total-t.shoppingCartProductList.final_total)):0),1),T,Object(r["j"])("div",E," $"+Object(r["I"])(t.shoppingCartProductList.carts.length>0?t.$filters.currency(Math.round(t.shoppingCartProductList.final_total)):0),1),Object(r["j"])("button",{type:"button",class:"product-all-delect-btn",onClick:e[4]||(e[4]=function(){return q.deletCartList&&q.deletCartList.apply(q,arguments)})}," 清空購物車 "),Object(r["j"])("button",{type:"button",class:"payment-btn",onClick:e[5]||(e[5]=function(){return q.goCheckOut&&q.goCheckOut.apply(q,arguments)})}," 結帳去 ")])]),Object(r["j"])(_,{active:i.isLoading},null,8,["active"])])}n("d81d"),n("b680"),n("99af"),n("a9e3");var S=n("c668"),_={name:"ShoppingCart",inject:["emitter"],mixins:[S["a"]],data:function(){return{couponCode:"",btnIsActive:!0,isLoading:!1}},computed:{nutrientContentCaloriesTotal:function(){var t=this.shoppingCartProductList.carts.map((function(t){return t.qty*t.product.nutrientContent.calories})),e=t.reduce((function(t,e){return t+e}),0);return parseFloat(e.toFixed(2))},nutrientContentProteinTotal:function(){var t=this.shoppingCartProductList.carts.map((function(t){return t.qty*t.product.nutrientContent.protein})),e=t.reduce((function(t,e){return t+e}),0);return parseFloat(e.toFixed(2))},nutrientContentFatTotal:function(){var t=this.shoppingCartProductList.carts.map((function(t){return t.qty*t.product.nutrientContent.fat})),e=t.reduce((function(t,e){return t+e}),0);return parseFloat(e.toFixed(2))},nutrientContentCarbohydratesTotal:function(){var t=this.shoppingCartProductList.carts.map((function(t){return t.qty*t.product.nutrientContent.carbohydrates})),e=t.reduce((function(t,e){return t+e}),0);return parseFloat(e.toFixed(2))}},methods:{goCheckOut:function(){0===this.shoppingCartProductList.carts.length?this.$swal.fire("目前購物車無任何商品哦!"):this.$router.push("/userorderform")},changeCartQty:function(t,e){this.isLoading=!0;var n=this,r="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/cart/").concat(t);e=Number(e);var c={product_id:t,qty:e};n.$http.put(r,{data:c}).then((function(t){n.isLoading=!1,n.$httpMessageState(t,"更新商品數量"),n.$emit("update-shopping-cart-products")}))},deletCart:function(t){var e=this;this.isLoading=!0;var n=this,r="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/cart/").concat(t);n.$http.delete(r).then((function(t){e.isLoading=!1,e.$httpMessageState(t,"刪除商品"),n.$emit("update-shopping-cart-products")}))},deletCartList:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/carts");t.$swal.fire({title:"再次確認",text:"是否要刪除所有的商品資料",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"取消",confirmButtonText:"確定刪除"}).then((function(n){n.isConfirmed&&t.$http.delete(e).then((function(e){e.data.success&&(t.$emit("update-shopping-cart-products"),t.$swal.fire("刪除成功!","你已刪除所有商品資料","success"))}))}))},useCoupon:function(){var t=this;this.isLoading=!0;var e=this,n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/coupon"),r={code:e.couponCode};e.$http.post(n,{data:r}).then((function(n){t.isLoading=!1,t.$httpMessageState(n,"已套用優惠券"),e.$emit("update-shopping-cart-products")}))}},created:function(){this.$emit("update-shopping-cart-products")}};_.render=q;e["default"]=_}}]);
//# sourceMappingURL=chunk-95f133f0.7555652f.js.map