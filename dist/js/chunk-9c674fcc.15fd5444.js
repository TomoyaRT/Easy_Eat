(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c674fcc"],{1225:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a={class:"admin-page-products"},n={class:"products-container"},i={class:"products-title-group"},r=Object(o["h"])('<div class="products-img">圖片</div><div class="products-category">類別</div><div class="products-name">名稱</div><div class="products-origin-price">原價</div><div class="products-price">售價</div><div class="products-status">啟用狀態</div>',6),u={class:"product-edit-btn-group"},d={class:"products-img-container"},l={class:"products-category"},s={class:"products-title"},p={class:"products-origin-price"},b={class:"products-price"},j={key:0,class:"products-status-enabled"},m={key:1,class:"products-status-unenabled"};function O(t,e,c,O,g,f){var h=Object(o["F"])("Loading"),v=Object(o["F"])("Pagination"),y=Object(o["F"])("ProductModal"),P=Object(o["F"])("DeletModal");return Object(o["w"])(),Object(o["f"])("div",a,[Object(o["j"])("div",n,[Object(o["j"])("div",i,[r,Object(o["j"])("div",u,[g.productEditStatus?(Object(o["w"])(),Object(o["f"])("i",{key:1,class:"bi bi-toggle2-on",onClick:e[2]||(e[2]=function(t){return g.productEditStatus=!1})})):(Object(o["w"])(),Object(o["f"])("i",{key:0,class:"bi bi-toggle2-off",onClick:e[1]||(e[1]=function(t){return g.productEditStatus=!0})}))])]),(Object(o["w"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(g.products,(function(e){return Object(o["w"])(),Object(o["f"])("div",{class:"products-content-group",key:e.id},[Object(o["j"])("div",d,[Object(o["j"])("img",{src:e.imageUrl,alt:"商品圖片",class:"products-img"},null,8,["src"])]),Object(o["j"])("div",l,Object(o["I"])(e.category),1),Object(o["j"])("div",s,[Object(o["j"])("p",null,Object(o["I"])(e.title),1)]),Object(o["j"])("div",p," $"+Object(o["I"])(t.$filters.currency(e.origin_price)),1),Object(o["j"])("div",b," $"+Object(o["I"])(t.$filters.currency(e.price)),1),e.is_enabled?(Object(o["w"])(),Object(o["f"])("div",j," 啟用 ")):(Object(o["w"])(),Object(o["f"])("div",m,"未啟用")),g.productEditStatus?(Object(o["w"])(),Object(o["f"])("i",{key:2,class:"bi bi-pencil-fill",onClick:function(t){return f.openModal("編輯商品",e)}},null,8,["onClick"])):(Object(o["w"])(),Object(o["f"])("i",{key:3,class:"bi bi-trash",onClick:function(t){return f.openModal("刪除商品",e)}},null,8,["onClick"]))])})),128))]),Object(o["j"])(h,{active:t.isLoading,"background-color":t.loadingObj.bgc,loader:t.loadingObj.style,color:t.loadingObj.color,opacity:t.loadingObj.opacity,height:t.loadingObj.height,width:t.loadingObj.width},null,8,["active","background-color","loader","color","opacity","height","width"]),Object(o["j"])(v,{pagination:t.pagination,onChangePage:f.getProducts},null,8,["pagination","onChangePage"]),Object(o["j"])(y,{class:{"modal-active":g.productModalStatus},onCloseModal:e[3]||(e[3]=function(t){return g.productModalStatus=!1}),product:g.tempProduct,"product-modal":g.productModal,onCreateProduct:f.updateProduct},null,8,["class","product","product-modal","onCreateProduct"]),Object(o["j"])(P,{class:{"modal-active":g.deletModalStatus},"delet-modal":g.tempProduct,onDeleteProduct:f.updateProduct,onCloseModal:e[4]||(e[4]=function(t){return g.deletModalStatus=!1})},null,8,["class","delet-modal","onDeleteProduct"])])}var g=c("5530"),f=(c("99af"),c("a4d3"),c("e01a"),{class:"admin-page-product-modal"}),h={class:"product-modal-container"},v={class:"modal-header-container"},y={class:"product-modal-title"},P={class:"product-modal-desktop-container"},S={class:"modal-image-container"},w={key:0,class:"product-image-range"},k=Object(o["j"])("h3",null,"圖片來源",-1),M={key:2,class:"product-image-upload"},C={for:"file",class:"image-upload-input"},U=Object(o["j"])("label",{for:"file",class:"image-upload-btn"},"瀏覽",-1),$={key:3,class:"product-image-url"},x=Object(o["j"])("button",{type:"button",class:"image-url-btn"},"確認",-1),V=Object(o["j"])("h3",null,"是否上架",-1),N={class:"product-status-switch-container"},F=Object(o["j"])("label",{for:"productStatus",class:"switch-label"},null,-1),I={class:"modal-product-container"},L={class:"product-name-container"},_=Object(o["j"])("label",{for:"name",class:"product-name"},"商品名稱",-1),D={class:"product-two-column-layout"},E={class:"product-category-container"},T=Object(o["j"])("label",{for:"category",class:"product-category"},"商品分類",-1),J={class:"product-unit-container"},q=Object(o["j"])("label",{for:"unit",class:"product-unit"},"單位",-1),z={class:"product-two-column-layout"},A={class:"product-origin-price-container"},B=Object(o["j"])("label",{for:"origin-price",class:"product-origin-price"},"原價",-1),G={class:"product-price-container"},H=Object(o["j"])("label",{for:"price",class:"product-price"},"售價",-1),K={class:"product-two-column-layout"},Q={class:"product-calories-container"},R=Object(o["j"])("label",{for:"calories",class:"product-calories"},"熱量",-1),W={class:"product-protein-container"},X=Object(o["j"])("label",{for:"protein",class:"product-protein"},"蛋白質",-1),Y={class:"product-two-column-layout"},Z={class:"product-fat-container"},tt=Object(o["j"])("label",{for:"fat",class:"product-fat"},"脂肪",-1),et={class:"product-carbohydrates-container"},ct=Object(o["j"])("label",{for:"carbohydrates",class:"product-carbohydrates"},"碳水化合物",-1),ot={class:"product-summary-container"},at=Object(o["j"])("label",{for:"description",class:"product-summary"},"商品摘要",-1),nt={class:"product-content-container"},it=Object(o["j"])("label",{for:"content",class:"product-content"},"商品說明",-1),rt={class:"modal-footer-container"};function ut(t,e,c,a,n,i){return Object(o["w"])(),Object(o["f"])("div",f,[Object(o["j"])("div",h,[Object(o["j"])("div",v,[Object(o["j"])("h1",y,Object(o["I"])(c.productModal.title),1),Object(o["j"])("i",{class:"bi bi-x-lg",onClick:e[1]||(e[1]=function(e){return t.$emit("close-modal")})})]),Object(o["j"])("div",P,[Object(o["j"])("div",S,[n.tempProduct.imageUrl?Object(o["g"])("",!0):(Object(o["w"])(),Object(o["f"])("div",w)),n.tempProduct.imageUrl?(Object(o["w"])(),Object(o["f"])("img",{key:1,src:n.tempProduct.imageUrl,alt:"商品圖片",class:"product-image"},null,8,["src"])):Object(o["g"])("",!0),k,Object(o["j"])("button",{type:"button",class:["btn-upload",{"upload-active":"upload"===n.imageSwitch}],onClick:e[2]||(e[2]=function(t){return n.imageSwitch="upload"})}," 上傳 ",2),Object(o["j"])("button",{type:"button",class:["btn-url",{"url-active":"url"===n.imageSwitch}],onClick:e[3]||(e[3]=function(t){return n.imageSwitch="url"})}," 網址 ",2),"upload"===n.imageSwitch?(Object(o["w"])(),Object(o["f"])("div",M,[Object(o["j"])("input",{type:"file",id:"file",class:"image-upload-origin-input",ref:"fileInput",onChange:e[4]||(e[4]=function(){return i.uploadFile&&i.uploadFile.apply(i,arguments)})},null,544),Object(o["j"])("label",C,Object(o["I"])(n.tempProduct.image||"未選擇圖片檔案"),1),U])):Object(o["g"])("",!0),"url"===n.imageSwitch?(Object(o["w"])(),Object(o["f"])("div",$,[Object(o["S"])(Object(o["j"])("input",{type:"text",class:"image-url-input",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.imageUrl=t})},null,512),[[o["N"],n.tempProduct.imageUrl]]),x])):Object(o["g"])("",!0),V,Object(o["j"])("div",N,[Object(o["S"])(Object(o["j"])("input",{type:"checkbox",id:"productStatus",class:"switch-checkbox","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.is_enabled=t})},null,512),[[o["L"],n.tempProduct.is_enabled]]),F])]),Object(o["j"])("div",I,[Object(o["j"])("div",L,[_,Object(o["S"])(Object(o["j"])("input",{type:"text",id:"name",class:"product-name-input","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.title=t})},null,512),[[o["N"],n.tempProduct.title]])]),Object(o["j"])("div",D,[Object(o["j"])("div",E,[T,Object(o["S"])(Object(o["j"])("input",{type:"text",id:"category",class:"product-category-input","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.category=t})},null,512),[[o["N"],n.tempProduct.category]])]),Object(o["j"])("div",J,[q,Object(o["S"])(Object(o["j"])("input",{type:"text",id:"unit",class:"product-unit-input","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.unit=t})},null,512),[[o["N"],n.tempProduct.unit]])])]),Object(o["j"])("div",z,[Object(o["j"])("div",A,[B,Object(o["S"])(Object(o["j"])("input",{type:"number",class:"product-origin-price-input",id:"origin-price","onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.origin_price=t})},null,512),[[o["N"],n.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["j"])("div",G,[H,Object(o["S"])(Object(o["j"])("input",{type:"number",id:"price",class:"product-price-input","onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.price=t})},null,512),[[o["N"],n.tempProduct.price,void 0,{number:!0}]])])]),Object(o["j"])("div",K,[Object(o["j"])("div",Q,[R,Object(o["S"])(Object(o["j"])("input",{type:"number",id:"calories",class:"product-calories-input","onUpdate:modelValue":e[12]||(e[12]=function(t){return n.tempProduct.nutrientContent.calories=t})},null,512),[[o["N"],n.tempProduct.nutrientContent.calories,void 0,{number:!0}]])]),Object(o["j"])("div",W,[X,Object(o["S"])(Object(o["j"])("input",{type:"number",id:"protein",class:"product-protein-input","onUpdate:modelValue":e[13]||(e[13]=function(t){return n.tempProduct.nutrientContent.protein=t})},null,512),[[o["N"],n.tempProduct.nutrientContent.protein,void 0,{number:!0}]])])]),Object(o["j"])("div",Y,[Object(o["j"])("div",Z,[tt,Object(o["S"])(Object(o["j"])("input",{type:"number",id:"fat",class:"product-fat-input","onUpdate:modelValue":e[14]||(e[14]=function(t){return n.tempProduct.nutrientContent.fat=t})},null,512),[[o["N"],n.tempProduct.nutrientContent.fat,void 0,{number:!0}]])]),Object(o["j"])("div",et,[ct,Object(o["S"])(Object(o["j"])("input",{type:"number",id:"carbohydrates",class:"product-carbohydrates-input","onUpdate:modelValue":e[15]||(e[15]=function(t){return n.tempProduct.nutrientContent.carbohydrates=t})},null,512),[[o["N"],n.tempProduct.nutrientContent.carbohydrates,void 0,{number:!0}]])])]),Object(o["j"])("div",ot,[at,Object(o["S"])(Object(o["j"])("textarea",{id:"description",class:"product-summary-textarea","onUpdate:modelValue":e[16]||(e[16]=function(t){return n.tempProduct.description=t})},null,512),[[o["N"],n.tempProduct.description]])]),Object(o["j"])("div",nt,[it,Object(o["S"])(Object(o["j"])("textarea",{id:"content",class:"product-content-textarea","onUpdate:modelValue":e[17]||(e[17]=function(t){return n.tempProduct.content=t})},null,512),[[o["N"],n.tempProduct.content]])]),Object(o["j"])("div",rt,[Object(o["j"])("button",{type:"button",class:"product-modal-cancel",onClick:e[18]||(e[18]=function(e){return t.$emit("close-modal")})}," 取消 "),Object(o["j"])("button",{type:"button",class:"product-modal-create",onClick:e[19]||(e[19]=function(e){return t.$emit("create-product",n.tempProduct)})},Object(o["I"])(c.productModal.btn),1)])])])])])}c("b0c0");var dt={data:function(){return{imageSwitch:"upload",tempProduct:{nutrientContent:{}}}},props:{product:{type:Object,default:function(){return{}}},productModal:{type:Object,default:function(){return{}}}},watch:{product:function(){this.tempProduct=this.product}},methods:{uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0];this.tempProduct.image=e.name;var c=new FormData;c.append("file-to-upload",e);var o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/admin/upload");this.$http.post(o,c).then((function(e){e.data.success&&(t.tempProduct.imageUrl=e.data.imageUrl,t.$httpMessageState(e,"圖片上傳"))}))}}};dt.render=ut;var lt=dt,st=c("e434"),pt=c("962f"),bt={mixins:[st["a"],pt["a"]],components:{ProductModal:lt},data:function(){return{productModalStatus:!1,deletModalStatus:!1,productEditStatus:!0,products:[],nowPage:1,tempProduct:{},productStatus:"",productModal:{title:"新增商品",btn:"建立"}}},methods:{getProducts:function(t){var e=this;this.isLoading=!0,this.nowPage=t;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/admin/products?page=").concat(this.nowPage);this.$http.get(c).then((function(t){e.isLoading=!1,t.data.success&&(e.products=t.data.products,e.pagination=t.data.pagination,e.goTop())}))},openModal:function(t,e){this.productStatus=t,"新增商品"===t?(this.tempProduct={nutrientContent:{}},this.productModal={title:"新增商品",btn:"建立"},this.productModalStatus=!0):"編輯商品"===t?(this.tempProduct=Object(g["a"])({},e),this.productModal.title="修改商品",this.productModal.btn="更新",this.productModalStatus=!0):(this.tempProduct=Object(g["a"])({},e),this.deletModalStatus=!0)},updateProduct:function(t){var e=this;this.isLoading=!0,this.tempProduct=t;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/admin/product"),o="post";"編輯商品"===this.productStatus?(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/admin/product/").concat(t.id),o="put"):"刪除商品"===this.productStatus&&(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/admin/product/").concat(t.id),o="delete"),this.$http[o](c,{data:this.tempProduct}).then((function(t){switch(e.productModalStatus=!1,e.deletModalStatus=!1,e.isLoading=!1,e.getProducts(e.nowPage),e.productStatus){case"新增商品":e.$httpMessageState(t,"新增商品");break;case"編輯商品":e.$httpMessageState(t,"編輯商品");break;default:e.$httpMessageState(t,"刪除商品")}}))},goTop:function(){window.scrollTo({top:0,behavior:"smooth"})}},created:function(){var t=this;this.$emit("change-navbar-page-title","商品管理"),this.$emit("change-navbar-btn-title","建立商品"),this.emitter.on("open-modal",(function(e){"商品管理"===e&&t.openModal("新增商品")})),this.getProducts(this.nowPage)}};bt.render=O;e["default"]=bt},b0c0:function(t,e,c){var o=c("83ab"),a=c("9bf2").f,n=Function.prototype,i=n.toString,r=/^\s*function ([^ (]*)/,u="name";o&&!(u in n)&&a(n,u,{configurable:!0,get:function(){try{return i.call(this).match(r)[1]}catch(t){return""}}})},e01a:function(t,e,c){"use strict";var o=c("23e7"),a=c("83ab"),n=c("da84"),i=c("5135"),r=c("861d"),u=c("9bf2").f,d=c("e893"),l=n.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var s={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(s[e]=!0),e};d(p,l);var b=p.prototype=l.prototype;b.constructor=p;var j=b.toString,m="Symbol(test)"==String(l("test")),O=/^Symbol\((.*)\)[^)]+$/;u(b,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=j.call(t);if(i(s,t))return"";var c=m?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-9c674fcc.15fd5444.js.map