(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7282cc0d"],{"1dde":function(t,n,e){var c=e("d039"),o=e("b622"),i=e("2d00"),r=o("species");t.exports=function(t){return i>=51||!c((function(){var n=[],e=n.constructor={};return e[r]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},"28a4":function(t,n,e){t.exports=e.p+"img/empty-shopping-cart.154d38ad.svg"},"65f0":function(t,n,e){var c=e("861d"),o=e("e8b5"),i=e("b622"),r=i("species");t.exports=function(t,n){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)?c(e)&&(e=e[r],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===n?0:n)}},8418:function(t,n,e){"use strict";var c=e("c04e"),o=e("9bf2"),i=e("5c6c");t.exports=function(t,n,e){var r=c(n);r in t?o.f(t,r,i(0,e)):t[r]=e}},"85a6":function(t,n,e){"use strict";n["a"]={created:function(){this.$emit("update-shopping-cart-products")}}},"962f":function(t,n,e){"use strict";n["a"]={data:function(){return{isLoading:!1,loadingObj:{bgc:"#FFFFFF",style:"dots",color:"#FF961F",height:128,width:128,opacity:.8}}}}},"99af":function(t,n,e){"use strict";var c=e("23e7"),o=e("d039"),i=e("e8b5"),r=e("861d"),a=e("7b0b"),s=e("50c4"),u=e("8418"),d=e("65f0"),l=e("1dde"),p=e("b622"),h=e("2d00"),f=p("isConcatSpreadable"),b=9007199254740991,j="Maximum allowed index exceeded",g=h>=51||!o((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),v=l("concat"),O=function(t){if(!r(t))return!1;var n=t[f];return void 0!==n?!!n:i(t)},C=!g||!v;c({target:"Array",proto:!0,forced:C},{concat:function(t){var n,e,c,o,i,r=a(this),l=d(r,0),p=0;for(n=-1,c=arguments.length;n<c;n++)if(i=-1===n?r:arguments[n],O(i)){if(o=s(i.length),p+o>b)throw TypeError(j);for(e=0;e<o;e++,p++)e in i&&u(l,p,i[e])}else{if(p>=b)throw TypeError(j);u(l,p++,i)}return l.length=p,l}})},b727:function(t,n,e){var c=e("0366"),o=e("44ad"),i=e("7b0b"),r=e("50c4"),a=e("65f0"),s=[].push,u=function(t){var n=1==t,e=2==t,u=3==t,d=4==t,l=6==t,p=7==t,h=5==t||l;return function(f,b,j,g){for(var v,O,C=i(f),y=o(C),m=c(b,j,3),w=r(y.length),L=0,P=g||a,x=n?P(f,w):e||p?P(f,0):void 0;w>L;L++)if((h||L in y)&&(v=y[L],O=m(v,L,C),t))if(n)x[L]=O;else if(O)switch(t){case 3:return!0;case 5:return v;case 6:return L;case 2:s.call(x,v)}else switch(t){case 4:return!1;case 7:s.call(x,v)}return l?-1:u||d?d:x}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},c668:function(t,n,e){"use strict";n["a"]={props:{favoriteProducts:{type:Array,default:function(){return[]}},shoppingCartProducts:{type:Object,default:function(){return{}}}},data:function(){return{favoriteProductList:this.favoriteProducts,shoppingCartProductList:{carts:[]}}},watch:{favoriteProducts:function(){this.favoriteProductList=this.favoriteProducts},shoppingCartProducts:function(){this.shoppingCartProductList=this.shoppingCartProducts}}}},d81d:function(t,n,e){"use strict";var c=e("23e7"),o=e("b727").map,i=e("1dde"),r=i("map");c({target:"Array",proto:!0,forced:!r},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,n,e){var c=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==c(t)}},faa5:function(t,n,e){"use strict";e.r(n);var c=e("7a23"),o=e("28a4"),i=e.n(o),r={class:"user-page-shopping-cart"},a={class:"shopping-cart"},s=Object(c["j"])("h1",{class:"shopping-cart-page-title"},"購物車清單",-1),u={key:0,class:"product-container"},d={class:"product-content"},l={class:"product-title"},p=Object(c["j"])("i",{class:"bi bi-trash"},null,-1),h={class:"product-purchase-quantity"},f={class:"product-unit"},b={class:"product-price"},j={key:1,class:"product-no-data-wrap"},g={class:"product-no-data-container"},v=Object(c["j"])("h1",{class:"product-no-data-title"},"目前沒有商品",-1),O=Object(c["j"])("img",{class:"product-no-data-img",src:i.a,alt:"購物車無商品圖片"},null,-1),C=Object(c["i"])("去逛逛"),y={class:"product-total"},m={class:"product-nutrition-list-container"},w=Object(c["h"])('<div class="nutrition-title-container"><div class="nutrition-title"><i class="bi bi-brightness-high-fill"></i>熱量 </div><div class="nutrition-title"><i class="bi bi-egg-fill"></i>蛋白質 </div><div class="nutrition-title"><i class="bi bi-droplet-half"></i>脂肪 </div><div class="nutrition-title"><i class="bi bi-palette-fill"></i>碳水化合物 </div></div>',1),L={class:"nutrition-content-container"},P={class:"nutrition-content"},x={class:"nutrition-content"},$={class:"nutrition-content"},k={class:"nutrition-content"},F=Object(c["j"])("div",{class:"product-price-title"},"商品金額總計",-1),q={class:"product-price-total"},I=Object(c["j"])("div",{class:"coupon-rebate-title"},"優惠券折抵",-1),T={class:"coupon-rebate-price"},A=Object(c["j"])("div",{class:"product-final-price-title"},"合計",-1),S={class:"product-final-price"};function B(t,n,e,o,i,B){var M=Object(c["F"])("router-link"),U=Object(c["F"])("Loading");return Object(c["w"])(),Object(c["f"])("div",r,[Object(c["j"])("div",a,[s,t.shoppingCartProductList.carts.length>0?(Object(c["w"])(),Object(c["f"])("div",u,[(Object(c["w"])(!0),Object(c["f"])(c["a"],null,Object(c["D"])(t.shoppingCartProductList.carts,(function(n){return Object(c["w"])(),Object(c["f"])("div",{class:"product",key:n.id},[Object(c["j"])(M,{to:"/userproduct/".concat(n.product.id),class:"item-link"},{default:Object(c["R"])((function(){return[Object(c["j"])("img",{src:n.product.imageUrl,alt:"商品圖片"},null,8,["src"])]})),_:2},1032,["to"]),Object(c["j"])("div",d,[Object(c["j"])("h1",l,[Object(c["j"])("p",null,Object(c["I"])(n.product.title),1)]),Object(c["j"])("div",{class:"product-delete",onClick:function(t){return B.deletCart(n.id)}},[p],8,["onClick"]),Object(c["j"])("div",h,[Object(c["j"])("i",{class:["bi bi-dash-lg",{"dash-disabled":n.qty<=1||!i.btnIsActive}],onClick:function(t){return B.changeCartQty(n.id,n.qty-1)}},null,10,["onClick"]),Object(c["S"])(Object(c["j"])("input",{type:"text","onUpdate:modelValue":function(t){return n.qty=t},minlength:"1",maxlength:"2",required:"",onChange:function(t){return B.changeCartQty(n.id,n.qty)}},null,40,["onUpdate:modelValue","onChange"]),[[c["N"],n.qty,void 0,{lazy:!0}]]),Object(c["j"])("span",f,Object(c["I"])(n.product.unit),1),Object(c["j"])("i",{class:["bi bi-plus-lg",{"plus-disabled":n.qty>=99||!i.btnIsActive}],onClick:function(t){return B.changeCartQty(n.id,n.qty+1)}},null,10,["onClick"])]),Object(c["j"])("div",b," $"+Object(c["I"])(t.$filters.currency(n.product.price*n.qty)),1)])])})),128))])):(Object(c["w"])(),Object(c["f"])("div",j,[Object(c["j"])("div",g,[v,O,Object(c["j"])(M,{to:{name:"UserProducts"},class:"product-no-data-btn",onClick:n[1]||(n[1]=function(n){return t.$emit("change-current-page-style","UserProducts")})},{default:Object(c["R"])((function(){return[C]})),_:1})])])),Object(c["j"])("div",y,[Object(c["j"])("div",m,[w,Object(c["j"])("div",L,[Object(c["j"])("div",P,Object(c["I"])(B.nutrientContentCaloriesTotal),1),Object(c["j"])("div",x,Object(c["I"])(B.nutrientContentProteinTotal),1),Object(c["j"])("div",$,Object(c["I"])(B.nutrientContentFatTotal),1),Object(c["j"])("div",k,Object(c["I"])(B.nutrientContentCarbohydratesTotal),1)])]),F,Object(c["j"])("div",q," $"+Object(c["I"])(t.shoppingCartProductList.carts.length>0?t.$filters.currency(t.shoppingCartProductList.total):0),1),Object(c["S"])(Object(c["j"])("input",{type:"text",placeholder:"請輸入優惠券序號",class:"coupon-codes","onUpdate:modelValue":n[2]||(n[2]=function(t){return i.couponCode=t})},null,512),[[c["N"],i.couponCode]]),Object(c["j"])("button",{class:"coupon-use",type:"button",onClick:n[3]||(n[3]=function(){return B.useCoupon&&B.useCoupon.apply(B,arguments)})}," 套用 "),I,Object(c["j"])("div",T," $"+Object(c["I"])(t.shoppingCartProductList.carts.length>0?t.$filters.currency(Math.round(t.shoppingCartProductList.total-t.shoppingCartProductList.final_total)):0),1),A,Object(c["j"])("div",S," $"+Object(c["I"])(t.shoppingCartProductList.carts.length>0?t.$filters.currency(Math.round(t.shoppingCartProductList.final_total)):0),1),Object(c["j"])("button",{type:"button",class:"product-all-delect-btn",onClick:n[4]||(n[4]=function(){return B.deletCartList&&B.deletCartList.apply(B,arguments)})}," 清空購物車 "),Object(c["j"])("button",{type:"button",class:"payment-btn",onClick:n[5]||(n[5]=function(){return B.goCheckOut&&B.goCheckOut.apply(B,arguments)})}," 結帳去 ")])]),Object(c["j"])(U,{active:t.isLoading,"background-color":t.loadingObj.bgc,loader:t.loadingObj.style,color:t.loadingObj.color,opacity:t.loadingObj.opacity,height:t.loadingObj.height,width:t.loadingObj.width},null,8,["active","background-color","loader","color","opacity","height","width"])])}e("d81d"),e("b680"),e("99af");var M=e("c668"),U=e("962f"),_=e("85a6"),Q={name:"ShoppingCart",inject:["emitter"],mixins:[M["a"],U["a"],_["a"]],data:function(){return{couponCode:"",btnIsActive:!0}},computed:{nutrientContentCaloriesTotal:function(){var t=this.shoppingCartProductList.carts.map((function(t){return t.qty*t.product.nutrientContent.calories})),n=t.reduce((function(t,n){return t+n}),0);return parseFloat(n.toFixed(2))},nutrientContentProteinTotal:function(){var t=this.shoppingCartProductList.carts.map((function(t){return t.qty*t.product.nutrientContent.protein})),n=t.reduce((function(t,n){return t+n}),0);return parseFloat(n.toFixed(2))},nutrientContentFatTotal:function(){var t=this.shoppingCartProductList.carts.map((function(t){return t.qty*t.product.nutrientContent.fat})),n=t.reduce((function(t,n){return t+n}),0);return parseFloat(n.toFixed(2))},nutrientContentCarbohydratesTotal:function(){var t=this.shoppingCartProductList.carts.map((function(t){return t.qty*t.product.nutrientContent.carbohydrates})),n=t.reduce((function(t,n){return t+n}),0);return parseFloat(n.toFixed(2))}},methods:{goCheckOut:function(){0===this.shoppingCartProductList.carts.length?this.$swal.fire("目前購物車無任何商品哦!"):this.$router.push("/userorderform")},changeCartQty:function(t,n){var e=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/cart/").concat(t);n=parseInt(n);var o={product_id:t,qty:n};e.isLoading=!0,e.$http.put(c,{data:o}).then((function(t){e.isLoading=!1,e.$httpMessageState(t,"更新商品數量"),e.$emit("update-shopping-cart-products")}))},deletCart:function(t){var n=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/cart/").concat(t);n.isLoading=!0,n.$http.delete(e).then((function(t){n.isLoading=!1,n.$httpMessageState(t,"刪除商品"),n.$emit("update-shopping-cart-products")}))},deletCartList:function(){var t=this,n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/carts");t.$swal.fire({title:"再次確認",text:"是否要刪除所有的商品資料",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"取消",confirmButtonText:"確定刪除"}).then((function(e){e.isConfirmed&&t.$http.delete(n).then((function(n){n.data.success&&(t.$emit("update-shopping-cart-products"),t.$swal.fire("刪除成功!","你已刪除所有商品資料","success"))}))}))},useCoupon:function(){var t=this,n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/coupon"),e={code:t.couponCode};t.isLoading=!0,t.$http.post(n,{data:e}).then((function(n){t.isLoading=!1,t.$httpMessageState(n,"套用優惠券"),t.$emit("update-shopping-cart-products")}))}}};Q.render=B;n["default"]=Q}}]);
//# sourceMappingURL=chunk-7282cc0d.15f3ba16.js.map