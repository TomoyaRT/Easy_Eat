(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68adeac0"],{"1dde":function(t,c,e){var r=e("d039"),o=e("b622"),a=e("2d00"),n=o("species");t.exports=function(t){return a>=51||!r((function(){var c=[],e=c.constructor={};return e[n]=function(){return{foo:1}},1!==c[t](Boolean).foo}))}},5641:function(t,c,e){"use strict";var r=e("7a23"),o={class:"checkout-flowchart"},a={class:"checkout-flowchart-status-container"},n={class:"checkout-flowchart-status-frame"},s={class:"checkout-flowchart-status-frame"},i={class:"checkout-flowchart-status-frame"},u=Object(r["j"])("div",{class:"checkout-flowchart-line"},null,-1),d=Object(r["j"])("ul",{class:"checkout-flowchart-title-container"},[Object(r["j"])("li",null,"訂單資料"),Object(r["j"])("li",null,"確認付款"),Object(r["j"])("li",null,"完成購買")],-1);function l(t,c,e,l,j,p){return Object(r["w"])(),Object(r["f"])("div",o,[Object(r["j"])("div",a,[Object(r["j"])("div",n,[Object(r["j"])("div",{class:["checkout-flowchart-status",{active:"OrderForm"===e.flowchartStatus}]},null,2)]),Object(r["j"])("div",s,[Object(r["j"])("div",{class:["checkout-flowchart-status",{active:"Checkout"===e.flowchartStatus}]},null,2)]),Object(r["j"])("div",i,[Object(r["j"])("div",{class:["checkout-flowchart-status",{active:"Payment"===e.flowchartStatus}]},null,2)])]),u,d])}var j={props:{flowchartStatus:{type:String,default:function(){return""}}}};j.render=l;c["a"]=j},"65f0":function(t,c,e){var r=e("861d"),o=e("e8b5"),a=e("b622"),n=a("species");t.exports=function(t,c){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)?r(e)&&(e=e[n],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===c?0:c)}},"76aa":function(t,c,e){"use strict";var r=e("7a23"),o={class:"shopping-cart-item"},a={class:"product-name"},n={class:"product-qty"},s={class:"product-unit"},i={class:"product-price"},u={class:"products-total-price-container"},d={class:"coupon-discount-container"},l=Object(r["j"])("div",{class:"coupon-title"},"優惠券折抵",-1),j={class:"coupon-discount-price"},p={class:"product-total-container"},b=Object(r["j"])("div",{class:"product-title"},"合計",-1),h={class:"product-total-price"};function f(t,c,e,f,O,v){return Object(r["w"])(),Object(r["f"])("div",{class:["user-page-shopping-cart-list",{"order-active":O.orderStatus}]},[(Object(r["w"])(!0),Object(r["f"])(r["a"],null,Object(r["D"])(O.shoppingCartProductList.carts,(function(t){return Object(r["w"])(),Object(r["f"])("div",{class:"shopping-cart-group",key:t.id},[Object(r["j"])("div",o,[Object(r["j"])("div",a,Object(r["I"])(t.product.title),1),Object(r["j"])("div",n,[Object(r["i"])(Object(r["I"])(t.qty)+" ",1),Object(r["j"])("span",s,Object(r["I"])(t.product.unit),1)]),Object(r["j"])("div",i,"$"+Object(r["I"])(t.total),1)])])})),128)),Object(r["j"])("div",u,[Object(r["j"])("div",d,[l,Object(r["j"])("div",j," $"+Object(r["I"])(O.shoppingCartProductList.carts.length>0?t.$filters.currency(Math.round(O.shoppingCartProductList.total-O.shoppingCartProductList.final_total)):0),1)]),Object(r["j"])("div",p,[b,Object(r["j"])("div",h," $"+Object(r["I"])(O.shoppingCartProductList.carts.length>0?t.$filters.currency(Math.round(O.shoppingCartProductList.final_total)):0),1)])])],2)}var O={name:"ShoppingCartList",inject:["emitter"],props:{shoppingCartProducts:{type:Object,default:function(){return{}}}},data:function(){return{orderStatus:!1,shoppingCartProductList:{carts:[]}}},watch:{shoppingCartProducts:function(){this.shoppingCartProductList=this.shoppingCartProducts}},created:function(){var t=this;this.emitter.on("switch-order",(function(c){t.orderStatus=void 0===c?!t.orderStatus:c})),this.shoppingCartProductList=this.shoppingCartProducts}};O.render=f;c["a"]=O},8418:function(t,c,e){"use strict";var r=e("c04e"),o=e("9bf2"),a=e("5c6c");t.exports=function(t,c,e){var n=r(c);n in t?o.f(t,n,a(0,e)):t[n]=e}},"85a6":function(t,c,e){"use strict";c["a"]={created:function(){this.$emit("update-shopping-cart-products")}}},"8a13":function(t,c,e){"use strict";e.r(c);e("b0c0");var r=e("7a23"),o={class:"user-page-checkout"},a={class:"checkout-container"},n={class:"checkout"},s=Object(r["j"])("div",{class:"checkout-title"},"確認付款",-1),i=Object(r["i"])(" 購物車訂單 "),u=Object(r["j"])("i",{class:"bi bi-caret-down-fill"},null,-1),d={class:"customer-checkout-container"},l={class:"customer-container"},j=Object(r["j"])("div",{class:"customer-title"},"姓名",-1),p={class:"customer-content"},b={class:"customer-container"},h=Object(r["j"])("div",{class:"customer-title"},"手機",-1),f={class:"customer-content"},O={class:"customer-container"},v=Object(r["j"])("div",{class:"customer-title"},"電子信箱",-1),g={class:"customer-content"},m={class:"customer-container"},w=Object(r["j"])("div",{class:"customer-title"},"地址",-1),y={class:"customer-content"},k={class:"customer-container"},C=Object(r["j"])("div",{class:"customer-title"},"備註訊息",-1),L={class:"customer-content"},P={class:"customer-container"},S=Object(r["j"])("div",{class:"customer-title"},"付款方式",-1),I={class:"customer-content"},F={class:"customer-container"},D=Object(r["j"])("div",{class:"customer-title"},"付款狀態",-1),x={key:0,class:"customer-payment-completed"},$={key:1,class:"customer-unpaid"};function A(t,c,e,A,M,_){var q=Object(r["F"])("CheckoutFlowchart"),E=Object(r["F"])("ShoppingCartList"),J=Object(r["F"])("Loading");return Object(r["w"])(),Object(r["f"])("div",o,[Object(r["j"])("div",a,[Object(r["j"])(q,{flowchartStatus:M.flowchartStatus},null,8,["flowchartStatus"]),Object(r["j"])("div",n,[s,Object(r["j"])("button",{type:"button",class:"shopping-cart-order-btn",onClick:c[1]||(c[1]=function(t){return _.emitter.emit("switch-order")})},[i,u]),Object(r["j"])(E,{"shopping-cart-products":M.shoppingCartProductList},null,8,["shopping-cart-products"]),Object(r["j"])("div",d,[Object(r["j"])("div",l,[j,Object(r["j"])("div",p,Object(r["I"])(t.orderData.user.name),1)]),Object(r["j"])("div",b,[h,Object(r["j"])("div",f,Object(r["I"])(t.orderData.user.tel),1)]),Object(r["j"])("div",O,[v,Object(r["j"])("div",g,Object(r["I"])(t.orderData.user.email),1)]),Object(r["j"])("div",m,[w,Object(r["j"])("div",y,Object(r["I"])(t.orderData.user.address),1)]),Object(r["j"])("div",k,[C,Object(r["j"])("div",L,Object(r["I"])(t.orderData.message),1)]),Object(r["j"])("div",P,[S,Object(r["j"])("div",I,Object(r["I"])(e.paymentMethod),1)]),Object(r["j"])("div",F,[D,t.orderData.is_paid?(Object(r["w"])(),Object(r["f"])("div",x," 付款完成 ")):(Object(r["w"])(),Object(r["f"])("div",$,"尚未付款"))])]),Object(r["j"])("button",{type:"button",class:"payment-btn",onClick:c[2]||(c[2]=function(){return _.payOrder&&_.payOrder.apply(_,arguments)})}," 確認付款 ")])]),Object(r["j"])(J,{active:t.isLoading,"background-color":t.loadingObj.bgc,loader:t.loadingObj.style,color:t.loadingObj.color,opacity:t.loadingObj.opacity,height:t.loadingObj.height,width:t.loadingObj.width},null,8,["active","background-color","loader","color","opacity","height","width"])])}e("99af");var M=e("ba50"),_=e("5641"),q=e("76aa"),E=e("962f"),J=e("85a6"),T={name:"Checkout",inject:["emitter"],mixins:[M["a"],E["a"],J["a"]],props:{shoppingCartProducts:{type:Object,default:function(){return{}}},paymentMethod:{type:String,default:function(){return""}}},components:{CheckoutFlowchart:_["a"],ShoppingCartList:q["a"]},data:function(){return{flowchartStatus:"Checkout",shoppingCartProductList:{carts:[]}}},methods:{payOrder:function(){var t=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/pay/").concat(t.orderId);t.isLoading=!0,t.$http.post(c).then((function(c){c.data.success&&(t.isLoading=!1,t.$router.push("/userpayment/".concat(t.orderId)))}))}},created:function(){this.shoppingCartProductList=this.shoppingCartProducts},mounted:function(){window.onbeforeunload=function(){return""}},beforeUnmount:function(){window.onbeforeunload=null}};T.render=A;c["default"]=T},"962f":function(t,c,e){"use strict";c["a"]={data:function(){return{isLoading:!1,loadingObj:{bgc:"#FFFFFF",style:"dots",color:"#FF961F",height:128,width:128,opacity:.8}}}}},"99af":function(t,c,e){"use strict";var r=e("23e7"),o=e("d039"),a=e("e8b5"),n=e("861d"),s=e("7b0b"),i=e("50c4"),u=e("8418"),d=e("65f0"),l=e("1dde"),j=e("b622"),p=e("2d00"),b=j("isConcatSpreadable"),h=9007199254740991,f="Maximum allowed index exceeded",O=p>=51||!o((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),v=l("concat"),g=function(t){if(!n(t))return!1;var c=t[b];return void 0!==c?!!c:a(t)},m=!O||!v;r({target:"Array",proto:!0,forced:m},{concat:function(t){var c,e,r,o,a,n=s(this),l=d(n,0),j=0;for(c=-1,r=arguments.length;c<r;c++)if(a=-1===c?n:arguments[c],g(a)){if(o=i(a.length),j+o>h)throw TypeError(f);for(e=0;e<o;e++,j++)e in a&&u(l,j,a[e])}else{if(j>=h)throw TypeError(f);u(l,j++,a)}return l.length=j,l}})},b0c0:function(t,c,e){var r=e("83ab"),o=e("9bf2").f,a=Function.prototype,n=a.toString,s=/^\s*function ([^ (]*)/,i="name";r&&!(i in a)&&o(a,i,{configurable:!0,get:function(){try{return n.call(this).match(s)[1]}catch(t){return""}}})},ba50:function(t,c,e){"use strict";e("99af");c["a"]={data:function(){return{orderId:"",orderData:{user:{}}}},methods:{getOrderData:function(){var t=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ecommerce-website","/order/").concat(t.orderId);t.$http.get(c).then((function(c){c.data.success&&(t.orderData=c.data.order)}))}},created:function(){this.orderId=this.$route.params.orderId,this.getOrderData()}}},e8b5:function(t,c,e){var r=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);
//# sourceMappingURL=chunk-68adeac0.11a0bb10.js.map